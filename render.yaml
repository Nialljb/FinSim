# Render Deployment Configuration
# Save this as render.yaml in your project root

services:
  # Main Streamlit App
  - type: web
    name: finsim-app
    env: python
    runtime: python
    plan: free #starter  # $7/month (or use 'free' for testing with auto-sleep)
    buildCommand: ./render-build.sh
    startCommand: streamlit run wealth_simulator.py --server.port=$PORT --server.address=0.0.0.0 --server.headless=true
    envVars:
      - key: PYTHON_VERSION
        value: 3.11.0
      - key: DATABASE_URL
        fromDatabase:
          name: finsim-db
          property: connectionString
      - key: SECRET_KEY
        generateValue: true
      - key: FREE_SIMULATION_LIMIT
        value: 10  # Max free simulations per user

databases:
  # PostgreSQL Database
  - name: finsim-db
    plan: free  # Free tier: 1GB storage, expires after 90 days of inactivity
    # OR use 'standard' for $7/month: 10GB storage, no expiration
    databaseName: finsim
    user: finsim_user
    region: oregon  # Choose: oregon, frankfurt, ohio, singapore